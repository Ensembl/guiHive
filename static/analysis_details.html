<table id="analysis_table" class="table table-hover table-condensed">
  <tr>
    <td> Analysis ID:</td><td><TMPL_VAR NAME=id> </td>
  </tr>
  <tr>
    <td> Analysis name:</td><td><TMPL_VAR NAME=logic_name> </td>
  </tr>
  <tr>
    <td> Module:</td>
    <td>
      <table border=1>
	<TMPL_LOOP NAME=module>
	  <tr>
	    <td>
	      <input type="text"
		     size=87
		     id="moduleName"
		     value="<TMPL_VAR NAME=module>"
		     data-value="<TMPL_VAR NAME=module>">
	    </td>
	    <td><button class="update_param"
			data-analysisID="<TMPL_VAR NAME=id>"
			data-adaptor="<TMPL_VAR NAME=adaptor>"
			data-method="<TMPL_VAR NAME=method>"
			data-linkTo="moduleName">+</button>
	    </td>
	  </tr>
	</TMPL_LOOP>
      </table>
    </td>
  </tr>
  <tr>
    <td> Parameters:</td>
    <td>
      <table border=1>
	<TMPL_LOOP NAME=parameters>
	  <TMPL_LOOP NAME=existing_parameters>
	    <tr>
	      <td>
		<span id="<TMPL_VAR NAME=parameterKeyID>"
		      size=30
		      data-value="<TMPL_VAR NAME=key>">
		  <TMPL_VAR NAME=key>
		</span>
	      </td>
	      <td><input id="<TMPL_VAR NAME=parameterValueID>"
			 type="text" 
			 size=60
			 data-value="<TMPL_VAR NAME=value>"
			 value="<TMPL_VAR NAME=value>">
	      </td>
	      <TMPL_LOOP NAME=change_parameter>
		<td><button class="update_param"
			    data-analysisID="<TMPL_VAR NAME=id>"
			    data-adaptor="<TMPL_VAR NAME=adaptor>"
			    data-method="<TMPL_VAR NAME=method>"
			    data-linkTo="<TMPL_VAR NAME=parameterKeyID>,<TMPL_VAR NAME=parameterValueID>">+</button>
		</td>
	      </TMPL_LOOP> <!-- change_paramter -->
	      <TMPL_LOOP NAME=delete_parameter>
		<td><button class="update_param"
			    data-analysisID="<TMPL_VAR NAME=id>"
			    data-adaptor="<TMPL_VAR NAME=adaptor>"
			    data-method="<TMPL_VAR NAME=method>"
			    data-linkTo="<TMPL_VAR NAME=parameterKeyID>">-</button>
		</td>
	      </TMPL_LOOP> <!-- delete_parameter -->
	    </tr>
	  </TMPL_LOOP> <!-- existing_parameters -->
	  <TMPL_LOOP NAME=new_parameter>
	    <tr>
	      <td><input type="text" size=20 id="p_new_key"></td>
	      <td><input type="text" size=60 id="p_new_value"></td>
	      <td><button class="update_param"
			  data-analysisID="<TMPL_VAR NAME=id>"
			  data-adaptor="<TMPL_VAR NAME=adaptor>"
			  data-method="<TMPL_VAR NAME=method>"
			  data-linkTo="p_new_key,p_new_value">+</button>
	      </td>
	    </tr>
	  </TMPL_LOOP> <!-- new parameter -->
	</TMPL_LOOP> <!-- parameters -->
      </table>
    </td>
  </tr>
  <tr>
    <td> Hive capacity:</td>
    <td>
      <TMPL_LOOP NAME=hive_capacity>
	<select size="1"
		class="update_param"
		data-analysisID="<TMPL_VAR NAME=id>"
		data-adaptor="<TMPL_VAR NAME=adaptor>"
		data-method="<TMPL_VAR NAME=method>">
	  <TMPL_LOOP NAME=values>
	    <option <TMPL_IF NAME=is_current>selected</TMPL_IF> value="<TMPL_VAR NAME=hive_capacity_value>"> <TMPL_VAR NAME=hive_capacity_display> </option>
	  </TMPL_LOOP>
	</select>
      </TMPL_LOOP>
    </td>
  </tr>
  <tr>
    <td> Priority:</td>
    <td>
      <TMPL_LOOP NAME=priority>
	<select size="1"
		class="update_param"
		data-analysisID="<TMPL_VAR NAME=id>"
		data-adaptor="<TMPL_VAR NAME=adaptor>"
		data-method="<TMPL_VAR NAME=method>">
	  <TMPL_LOOP NAME=values>
	    <option <TMPL_IF NAME=is_current>selected</TMPL_IF>
		    value="<TMPL_VAR NAME=priority_value>">
	      <TMPL_VAR NAME=priority_display></option>
	  </TMPL_LOOP>
	</select>
      </TMPL_LOOP>
    </td>
  </tr>
  <tr>
    <td> Batch size:</td>
    <td>
      <TMPL_LOOP NAME=batch_size>
	<select size="1" 
		class="update_param"
		data-analysisID="<TMPL_VAR NAME=id>"
		data-adaptor="<TMPL_VAR NAME=adaptor>"
		data-method="<TMPL_VAR NAME=method>">
	  <TMPL_LOOP NAME=values>
	    <option <TMPL_IF NAME=is_current>selected </TMPL_IF>value="<TMPL_VAR NAME=batch_size_value>"><TMPL_VAR NAME=batch_size_display></option>
	  </TMPL_LOOP>
	</select>
      </TMPL_LOOP>
    </td>
  </tr>
  <tr>
    <td> Can be empty:</td>
    <td>
      <TMPL_LOOP NAME=can_be_empty>
	<select size="1"
		class="update_param"
		data-analysisID="<TMPL_VAR NAME=id>"
		data-adaptor="<TMPL_VAR NAME=adaptor>"
		data-method="<TMPL_VAR NAME=method>">
	  <TMPL_LOOP NAME=values>
	    <option <TMPL_IF NAME=is_current>selected </TMPL_IF>value="<TMPL_VAR NAME=can_be_empty_value>"><TMPL_VAR NAME=can_be_empty_display></option>
	  </TMPL_LOOP>
	</select>
      </TMPL_LOOP>
    </td>
  </tr>
  <tr>
    <td> Resource class ID:</td>
    <td>
      <TMPL_LOOP NAME=resource_class_id>
	<select size="1"
		class="update_param"
		data-analysisID="<TMPL_VAR NAME=id>"
		data-adaptor="<TMPL_VAR NAME=adaptor>"
		data-method="<TMPL_VAR NAME=method>">
	  <TMPL_LOOP NAME=values>
	    <option <TMPL_IF NAME=is_current>selected </TMPL_IF>value="<TMPL_VAR NAME=resource_class_id_value>"><TMPL_VAR NAME=resource_class_id_display></option>
	  </TMPL_LOOP>
      </TMPL_LOOP>
    </td>
  </tr>
</table>
